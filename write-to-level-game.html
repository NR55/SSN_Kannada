<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Write2Level - Language Learning Games</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            color: #333;
        }
        
        header {
            background-color: #7ed957;
            color: #333;
            text-align: center;
            padding: 1.5rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin: 0;
            font-size: 2rem;
        }
        
        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        .game-container {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .level-indicator {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .level-badge {
            display: inline-block;
            background-color: #7ed957;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .game-instructions {
            background-color: #f8f8f8;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 2rem;
            border-left: 4px solid #7ed957;
        }
        
        .writing-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            align-items: center;
        }
        
        .character-display {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .character {
            font-size: 8rem;
            line-height: 1;
            margin-bottom: 1rem;
        }
        
        .pronunciation {
            font-size: 1.5rem;
            color: #666;
        }
        
        .canvas-container {
            border: 2px solid #ddd;
            border-radius: 5px;
            position: relative;
            background-color: #fff;
        }
        
        #drawing-canvas {
            display: block;
            cursor: crosshair;
            background-color: white;
            width: 100%;
            height: 300px;
            border-radius: 4px;
        }
        
        .canvas-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            background-color: #4a6ea9;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s;
        }
        
        .btn:hover {
            background-color: #3a5b8c;
        }
        
        .btn.secondary {
            background-color: #777;
        }
        
        .btn.secondary:hover {
            background-color: #666;
        }
        
        .btn.success {
            background-color: #7ed957;
        }
        
        .btn.success:hover {
            background-color: #69c046;
        }
        
        .feedback-container {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 5px;
            text-align: center;
            display: none;
        }
        
        .feedback-success {
            background-color: #e6ffed;
            color: #2d862d;
            border: 1px solid #a6e9a6;
        }
        
        .feedback-failure {
            background-color: #fff2f0;
            color: #e53935;
            border: 1px solid #f8c6c5;
        }
        
        .result-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .level-selection {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 0.75rem;
        }
        
        .level-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 2px solid #ddd;
            transition: all 0.2s;
        }
        
        .level-btn:hover {
            background-color: #e0e0e0;
        }
        
        .level-btn.active {
            background-color: #7ed957;
            color: white;
            border-color: #7ed957;
        }
        
        .level-btn.completed {
            background-color: #e6ffed;
            border-color: #7ed957;
            color: #2d862d;
        }
        
        .level-btn.locked {
            background-color: #f5f5f5;
            color: #aaa;
            cursor: not-allowed;
            border-color: #eee;
        }
        
        footer {
            text-align: center;
            padding: 1rem 0;
            margin-top: 2rem;
            color: #777;
        }
    </style>
</head>
<body>
    <header>
        <h1>Write2Level</h1>
    </header>
    
    <div class="container">
        <div class="level-selection" id="level-selection">
            <!-- Levels will be populated by JavaScript -->
        </div>
        
        <div class="game-container" id="game-screen">
            <div class="level-indicator">
                <div class="level-badge">Level <span id="current-level">1</span></div>
            </div>
            
            <div class="game-instructions">
                <p>Practice writing the character shown on the left. Draw on the canvas and submit your work for evaluation.</p>
            </div>
            
            <div class="writing-container">
                <div class="character-display">
                    <div class="character" id="current-character">あ</div>
                    <div class="pronunciation" id="current-pronunciation">a</div>
                </div>
                
                <div class="canvas-container">
                    <canvas id="drawing-canvas"></canvas>
                    
                    <div class="canvas-controls">
                        <button class="btn secondary" id="clear-btn">Clear Canvas</button>
                        <button class="btn success" id="submit-btn">Submit</button>
                    </div>
                </div>
            </div>
            
            <div class="feedback-container" id="feedback-container">
                <div class="result-icon" id="result-icon"></div>
                <h3 id="feedback-title">Great job!</h3>
                <p id="feedback-message">Your writing looks good. You can now proceed to the next level.</p>
                <button class="btn" id="next-level-btn">Next Level</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Language Learning Games</p>
    </footer>
    
    <script>
        // Sample character data - would be loaded from server in production
        // const levelData = [
        //     { character: "あ", pronunciation: "a" },
        //     { character: "い", pronunciation: "i" },
        //     { character: "う", pronunciation: "u" },
        //     { character: "え", pronunciation: "e" },
        //     { character: "お", pronunciation: "o" },
        //     { character: "か", pronunciation: "ka" },
        //     { character: "き", pronunciation: "ki" },
        //     { character: "く", pronunciation: "ku" },
        //     { character: "け", pronunciation: "ke" },
        //     { character: "こ", pronunciation: "ko" }
        // ];
        

    const levelData = [
        { character: "ಅ", pronunciation: "a" },
        { character: "ಆ", pronunciation: "aa" },
        { character: "ಇ", pronunciation: "i" },
        { character: "ಈ", pronunciation: "ii" },
        { character: "ಉ", pronunciation: "u" },
        { character: "ಊ", pronunciation: "uu" },
        { character: "ಋ", pronunciation: "ru" },
        { character: "ಎ", pronunciation: "e" },
        { character: "ಏ", pronunciation: "ee" },
        { character: "ಐ", pronunciation: "ai" },
        { character: "ಒ", pronunciation: "o" },
        { character: "ಓ", pronunciation: "oo" },
        { character: "ಔ", pronunciation: "au" },

        { character: "ಕ", pronunciation: "ka" },
        { character: "ಖ", pronunciation: "kha" },
        { character: "ಗ", pronunciation: "ga" },
        { character: "ಘ", pronunciation: "gha" },
        { character: "ಙ", pronunciation: "nga" },

        { character: "ಚ", pronunciation: "cha" },
        { character: "ಛ", pronunciation: "chha" },
        { character: "ಜ", pronunciation: "ja" },
        { character: "ಝ", pronunciation: "jha" },
        { character: "ಞ", pronunciation: "nya" },

        { character: "ಟ", pronunciation: "ṭa" },
        { character: "ಠ", pronunciation: "ṭha" },
        { character: "ಡ", pronunciation: "ḍa" },
        { character: "ಢ", pronunciation: "ḍha" },
        { character: "ಣ", pronunciation: "ṇa" },

        { character: "ತ", pronunciation: "ta" },
        { character: "ಥ", pronunciation: "tha" },
        { character: "ದ", pronunciation: "da" },
        { character: "ಧ", pronunciation: "dha" },
        { character: "ನ", pronunciation: "na" },

        { character: "ಪ", pronunciation: "pa" },
        { character: "ಫ", pronunciation: "pha" },
        { character: "ಬ", pronunciation: "ba" },
        { character: "ಭ", pronunciation: "bha" },
        { character: "ಮ", pronunciation: "ma" },

        { character: "ಯ", pronunciation: "ya" },
        { character: "ರ", pronunciation: "ra" },
        { character: "ಲ", pronunciation: "la" },
        { character: "ವ", pronunciation: "va" },
        { character: "ಶ", pronunciation: "sha" },
        { character: "ಷ", pronunciation: "ṣha" },
        { character: "ಸ", pronunciation: "sa" },
        { character: "ಹ", pronunciation: "ha" },
        { character: "ಳ", pronunciation: "ḷa" },
        { character: "ಕ್ಷ", pronunciation: "kṣa" },
        { character: "ಜ್ಞ", pronunciation: "jña" }
    ];

        // Game state variables
        let currentLevel = 1;
        let maxUnlockedLevel = 1;
        let completedLevels = [];
        let drawing = false;
        
        // DOM Elements
        const levelSelection = document.getElementById('level-selection');
        const currentLevelEl = document.getElementById('current-level');
        const currentCharacterEl = document.getElementById('current-character');
        const currentPronunciationEl = document.getElementById('current-pronunciation');
        const canvas = document.getElementById('drawing-canvas');
        const ctx = canvas.getContext('2d');
        const clearBtn = document.getElementById('clear-btn');
        const submitBtn = document.getElementById('submit-btn');
        const feedbackContainer = document.getElementById('feedback-container');
        const resultIcon = document.getElementById('result-icon');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextLevelBtn = document.getElementById('next-level-btn');
        
        // Initialize the level selection
        function initLevelSelection() {
            levelSelection.innerHTML = '';
            
            for (let i = 1; i <= levelData.length; i++) {
                const levelBtn = document.createElement('div');
                levelBtn.textContent = i;
                
                if (i === currentLevel) {
                    levelBtn.className = 'level-btn active';
                } else if (completedLevels.includes(i)) {
                    levelBtn.className = 'level-btn completed';
                } else if (i <= maxUnlockedLevel) {
                    levelBtn.className = 'level-btn';
                } else {
                    levelBtn.className = 'level-btn locked';
                }
                
                if (i <= maxUnlockedLevel) {
                    levelBtn.addEventListener('click', () => {
                        loadLevel(i);
                    });
                }
                
                levelSelection.appendChild(levelBtn);
            }
        }
        
        // Load a specific level
        function loadLevel(level) {
            // Update the current level
            currentLevel = level;
            currentLevelEl.textContent = level;
            
            // Update level selection
            const levelBtns = document.querySelectorAll('.level-btn');
            levelBtns.forEach((btn, index) => {
                btn.classList.remove('active');
                if (index + 1 === level) {
                    btn.classList.add('active');
                }
            });
            
            // Update character display
            const levelIndex = level - 1;
            if (levelIndex < levelData.length) {
                currentCharacterEl.textContent = levelData[levelIndex].character;
                currentPronunciationEl.textContent = levelData[levelIndex].pronunciation;
            }
            
            // Clear the canvas
            clearCanvas();
            
            // Hide feedback
            feedbackContainer.style.display = 'none';
        }
        
        // Initialize canvas
        function initCanvas() {
            // Set canvas dimensions
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Set up drawing style
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#000';
            
            // Clear canvas
            clearCanvas();
            
            // Mouse events for drawing
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        // Start drawing
        function startDrawing(e) {
            drawing = true;
            draw(e);
        }
        
        // Draw on canvas
        function draw(e) {
            if (!drawing) return;
            
            // Get mouse/touch position
            const x = e.clientX || (e.touches && e.touches[0].clientX);
            const y = e.clientY || (e.touches && e.touches[0].clientY);
            
            if (!x || !y) return;
            
            // Get canvas position
            const rect = canvas.getBoundingClientRect();
            const canvasX = x - rect.left;
            const canvasY = y - rect.top;
            
            // Draw line
            ctx.lineTo(canvasX, canvasY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(canvasX, canvasY);
        }
        
        // Stop drawing
        function stopDrawing() {
            ctx.beginPath();
            drawing = false;
        }
        
        // Handle touch events
        function handleTouch(e) {
            e.preventDefault();
            
            if (e.type === 'touchstart') {
                startDrawing(e);
            } else if (e.type === 'touchmove') {
                draw(e);
            }
        }
        
        // Clear canvas
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Submit drawing for evaluation
        function submitDrawing() {
            // In a real application, the canvas data would be sent to a backend for evaluation
            // For now, we'll use a random result with a bias toward success
            
            // Get canvas data (would be sent to backend)
            const canvasData = canvas.toDataURL();
            
            // Simulate backend evaluation with random success rate (70% success)
            const successRate = 0.7;
            const success = Math.random() < successRate;
            
            // Display feedback
            // showFeedback(success);
            showFeedback(true);
        }
        
        // Show feedback
        function showFeedback(success) {
            feedbackContainer.style.display = 'block';
            
            if (success) {
                feedbackContainer.className = 'feedback-container feedback-success';
                resultIcon.textContent = '✓';
                feedbackTitle.textContent = 'Great job!';
                feedbackMessage.textContent = 'Your writing looks good. You can now proceed to the next level.';
                nextLevelBtn.style.display = 'inline-block';
                
                // Mark level as completed
                if (!completedLevels.includes(currentLevel)) {
                    completedLevels.push(currentLevel);
                }
                
                // Unlock next level if not already unlocked
                if (currentLevel === maxUnlockedLevel && currentLevel < levelData.length) {
                    maxUnlockedLevel++;
                }
                
                // Update level selection
                initLevelSelection();
            } else {
                feedbackContainer.className = 'feedback-container feedback-failure';
                resultIcon.textContent = '✗';
                feedbackTitle.textContent = 'Try again';
                feedbackMessage.textContent = 'Your writing needs some improvement. Try practicing again.';
                nextLevelBtn.style.display = 'none';
            }
        }
        
        // Go to next level
        function goToNextLevel() {
            if (currentLevel < levelData.length) {
                loadLevel(currentLevel + 1);
            } else {
                // All levels completed
                alert('Congratulations! You have completed all levels!');
            }
        }
        
        // Handle window resize
        function handleResize() {
            // Update canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Restore drawing settings
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#000';
        }
        
        // Event listeners
        clearBtn.addEventListener('click', clearCanvas);
        submitBtn.addEventListener('click', submitDrawing);
        nextLevelBtn.addEventListener('click', goToNextLevel);
        window.addEventListener('resize', handleResize);
        
        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            initLevelSelection();
            initCanvas();
            loadLevel(1);
        });
    </script>
</body>
</html>
